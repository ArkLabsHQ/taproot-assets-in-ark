package main

import (
	"encoding/hex"
	"taponark"
)

func main() {

	const (
		//alice
		boardingUserDataDir     = "data"
		boardingUserTapTLSCert  = "2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949435054434341654f67417749424167495158446e45642b37394b53676f584e565664774130536a414b42676771686b6a4f50515144416a41324d5341770a486759445651514b457864305958426b494746316447396e5a57356c636d46305a57516759325679644445534d4241474131554541784d4a59577870593255740a644746774d423458445449314d4449794e6a45774d6a41774e316f58445449324d4451794d7a45774d6a41774e316f774e6a45674d4234474131554543684d580a644746775a434268645852765a3256755a584a686447566b49474e6c636e5178456a415142674e5642414d544357467361574e6c4c5852686344425a4d424d470a42797147534d34394167454743437147534d3439417745484130494142434d6d2b5a4b4f484f68696e6146516e436d44724a7a597a317448434d64304d474e4d0a4c367245613956636c346862456450517771786c446b7034726b355374454a7036384279415149596f764b624b6859327663326a6764497767633877446759440a565230504151482f4241514441674b6b4d424d47413155644a51514d4d416f47434373474151554642774d424d41384741315564457745422f7751464d414d420a41663877485159445652304f42425945464e5873594339663947326e754845563956424268554253557653464d48674741315564455152784d472b43435746730a61574e6c4c5852686349494a6247396a5957786f62334e3067676c6862476c6a5a5331305958434345334276624746794c5734784d69316862476c6a5a5331300a595843434248567561586943436e56756158687759574e725a58534342324a315a6d4e76626d36484248384141414748454141414141414141414141414141410a4141414141414748424b776241414977436759494b6f5a497a6a3045417749445341417752514967666262783863373446516f6a416c365a4672682f2b4d6a710a2f4e63356d54694d384a6a335973446a2b4741434951434c754f6e4672363656504e49444e4432617335314e4343564b364f3379457864436b576a4a6b4c57330a4d673d3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a"
		boardingUserTapMacaroon = "0201047461706402d001030a106cb92da3d32bb781d2bdf1645ead00671201301a180a09616464726573736573120472656164120577726974651a150a06617373657473120472656164120577726974651a170a086368616e6e656c73120472656164120577726974651a150a066461656d6f6e120472656164120577726974651a130a046d696e74120472656164120577726974651a150a0670726f6f6673120472656164120577726974651a120a03726671120472656164120577726974651a170a08756e69766572736512047265616412057772697465000006206674bc84382ef7d29723a1f84343d211b503b80c3e81247fa4882e5c7ada1794"
		boardingUserRPCPort     = "12029"
		boardingUserRPCHostPort = "localhost:" + boardingUserRPCPort
		//bob
		exitUserDataDir     = "data"
		exitUserTapTLSCert  = "2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949434d7a434341646d67417749424167495158683146594f653472443871435571377a6c487a7954414b42676771686b6a4f50515144416a41304d5341770a486759445651514b457864305958426b494746316447396e5a57356c636d46305a57516759325679644445514d4134474131554541784d48596d39694c5852680a63444165467730794e5441794d6a59784d4449344d544261467730794e6a41304d6a4d784d4449344d5442614d4451784944416542674e5642416f54463352680a63475167595856306232646c626d56795958526c5a43426a5a584a304d52417744675944565151444577646962324974644746774d466b77457759484b6f5a490a7a6a3043415159494b6f5a497a6a3044415163445167414557655831775775756478547a3262642f4875393662415048556c44624343674a634c6134464857580a6a5572473377325245466f3037674e7575564c74574b6f66594a473863492f66714d38345459486d6c61644751364f427a4443427954414f42674e56485138420a4166384542414d4341715177457759445652306c42417777436759494b775942425155484177457744775944565230544151482f42415577417745422f7a41640a42674e5648513445466751554359756232656d79437267486b765963796b3558305051474c73347763675944565230524247737761594948596d39694c5852680a6349494a6247396a5957786f62334e306767646962324974644746776768467762327868636931754d544974596d39694c58526863494945645735706549494b0a64573570654842685932746c64494948596e566d59323975626f63456677414141596351414141414141414141414141414141414141414141596345724230410a417a414b42676771686b6a4f5051514441674e494144424641694238763576575153696f753959554930666e4459666950744b52335874774939566b69686e440a4264455137514968414c3475576331595170756877794a672b67384947374d57506c325a742f2b74304d472b6634734874586e370a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a"
		exitUserTapMacaroon = "0201047461706402d001030a10c458293ab48b81edb6ab59fb94ffe2e71201301a180a09616464726573736573120472656164120577726974651a150a06617373657473120472656164120577726974651a170a086368616e6e656c73120472656164120577726974651a150a066461656d6f6e120472656164120577726974651a130a046d696e74120472656164120577726974651a150a0670726f6f6673120472656164120577726974651a120a03726671120472656164120577726974651a170a08756e697665727365120472656164120577726974650000062038c58e137a2dd68b04e7954e65f918022858300be7fa1abb809b15fb5a0762e6"
		exitUserRPCPort     = "12030"
		exitUserRPCHostPort = "localhost:" + exitUserRPCPort
		//server
		serverDataDir     = "data"
		serverTapTLSCert  = "2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949435054434341655367417749424167495241502b55765846494c6f71533458617667325a4736416377436759494b6f5a497a6a3045417749774e6a45670a4d4234474131554543684d58644746775a434268645852765a3256755a584a686447566b49474e6c636e5178456a415142674e5642414d5443574e68636d39730a4c58526863444165467730794e5441794d6a59784d4449344d544261467730794e6a41304d6a4d784d4449344d5442614d4459784944416542674e5642416f540a4633526863475167595856306232646c626d56795958526c5a43426a5a584a304d524977454159445651514445776c6a59584a766243313059584177575441540a42676371686b6a4f5051494242676771686b6a4f50514d4242774e4341415249427852423541795776732f535a4c476b542f6a312f2f5564653830726a4970630a684167554e5262434b6f4a3659546d535472312b364863634c7654573642454a596a454833766f43586d6b557041624d693170686f3448534d4948504d4134470a41315564447745422f775145417749437044415442674e56485355454444414b4267677242674546425163444154415042674e5648524d4241663845425441440a4151482f4d4230474131556444675157424253724848412b6973746a7378487a412b4d5a46635145566e394a3354423442674e56485245456354427667676c6a0a59584a76624331305958434343577876593246736147397a6449494a59324679623277746447467767684e7762327868636931754d54497459324679623277740a6447467767675231626d6c3467677031626d6c346347466a613256306767646964575a6a623235756877522f41414142687841414141414141414141414141410a414141414141414268775373485141434d416f4743437147534d343942414d43413063414d455143494177384e33786f58517231497557487a637677577a36470a5677307a772f4758756730482b3334423635466b4169427350786644583476585834424a504b7645324e4951652f32732f35463547506b6e63686d314a4f73470a35773d3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a"
		serverTapMacaroon = "0201047461706402d001030a10dbf6cf7a7d1c90ababe0d2deb85ca6d41201301a180a09616464726573736573120472656164120577726974651a150a06617373657473120472656164120577726974651a170a086368616e6e656c73120472656164120577726974651a150a066461656d6f6e120472656164120577726974651a130a046d696e74120472656164120577726974651a150a0670726f6f6673120472656164120577726974651a120a03726671120472656164120577726974651a170a08756e697665727365120472656164120577726974650000062074b3c46b46830fd4113e4d37c952500d7cbdd33190de2c797f6acf6003d12578"
		serverRPCPort     = "12031"
		serverRPCHostPort = "localhost:" + serverRPCPort
	)

	const (
		boardingUserLndTLSCert     = "2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d494943506a434341655367417749424167495143362f374b566965775939417a315a765844704d7744414b42676771686b6a4f50515144416a41784d5238770a485159445651514b45785a73626d5167595856306232646c626d56795958526c5a43426a5a584a304d51347744415944565151444577566862476c6a5a5441650a467730794e5441794d6a59784d4449774d446461467730794e6a41304d6a4d784d4449774d4464614d444578487a416442674e5642416f54466d78755a4342680a645852765a3256755a584a686447566b49474e6c636e5178446a414d42674e5642414d544257467361574e6c4d466b77457759484b6f5a497a6a3043415159490a4b6f5a497a6a30444151634451674145446f6179565446794f5539384c696b4152782b614a4c6443414430442b36777a487732686f37446e587630654a6732320a78684f466a47512f44506563383155575852766c47503848776b39326f4f6232594b4d3347714f4233544342326a414f42674e56485138424166384542414d430a41715177457759445652306c42417777436759494b775942425155484177457744775944565230544151482f42415577417745422f7a416442674e56485134450a46675155736c797973536b6e59324d57312b4971434b7a68776349785a4930776759494741315564455152374d486d434257467361574e6c67676c7362324e680a62476876633353434257467361574e6c6767397762327868636931754d544974595778705932574346476876633351755a47396a613256794c6d6c75644756790a626d467367675231626d6c3467677031626d6c346347466a613256306767646964575a6a623235756877522f41414142687841414141414141414141414141410a414141414141414268775373477741464d416f4743437147534d343942414d43413067414d45554349442f336953424c634857497056316e3270565a375134530a2b4e2f657a2b2b4c356e4945657459363643553241694541375275756947702f75363158464751573666472b316679433446622f70653666334f5373397457710a3745413d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a"
		boardingUserLndMacaroon    = "0201036c6e6402f801030a106acc2052b49cb514a11693f599f809311201301a160a0761646472657373120472656164120577726974651a130a04696e666f120472656164120577726974651a170a08696e766f69636573120472656164120577726974651a210a086d616361726f6f6e120867656e6572617465120472656164120577726974651a160a076d657373616765120472656164120577726974651a170a086f6666636861696e120472656164120577726974651a160a076f6e636861696e120472656164120577726974651a140a057065657273120472656164120577726974651a180a067369676e6572120867656e65726174651204726561640000062016240acdcc40f491ec9f9fdf4b18dcea8117d711664a2c9b3a9efa5d4644a48d"
		boardingUserLndRpcPort     = "10001"
		boardingUserLndRpcHostPort = "localhost:" + boardingUserLndRpcPort

		exitUserLndTLSCert     = "2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949434e444343416471674177494241674952414f51374b717a30565a664b6d564d4356566e5a53615577436759494b6f5a497a6a3045417749774c7a45660a4d4230474131554543684d576247356b494746316447396e5a57356c636d46305a575167593256796444454d4d416f474131554541784d44596d39694d4234580a445449314d4449794e6a45774d6a41774e316f58445449324d4451794d7a45774d6a41774e316f774c7a45664d4230474131554543684d576247356b494746310a6447396e5a57356c636d46305a575167593256796444454d4d416f474131554541784d44596d39694d466b77457759484b6f5a497a6a3043415159494b6f5a490a7a6a30444151634451674145413950764f324a536b4937553254526779474b6a5a6e594a4e49516b6e663947597a3537792f774c4247572b6a54754e64346a750a7136767636514b48706a496b31634d5955757a374b366842737a427937387176514b4f42316a4342307a414f42674e56485138424166384542414d43417151770a457759445652306c42417777436759494b775942425155484177457744775944565230544151482f42415577417745422f7a416442674e5648513445466751550a57596d5a4e526d53324a572b504f497177536d6e785671384b6e4d7766415944565230524248557763344944596d396967676c7362324e6862476876633353430a41324a76596f494e6347397359584974626a45794c574a76596f49556147397a6443356b62324e725a584975615735305a584a755957794342485675615869430a436e56756158687759574e725a58534342324a315a6d4e76626d36484248384141414748454141414141414141414141414141414141414141414748424b77620a41414d77436759494b6f5a497a6a304541774944534141775251496748626a656955492f457372376557322b4e6a48385848726f744c787179343868317146500a43454f46477a6f434951444b49394778435857684d74513841595157445a3575536f4855566b6b533045504f72656351652f387268513d3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a"
		exitUserLndMacaroon    = "0201036c6e6402f801030a1066ff1549041052f65cab4a5aef644fbf1201301a160a0761646472657373120472656164120577726974651a130a04696e666f120472656164120577726974651a170a08696e766f69636573120472656164120577726974651a210a086d616361726f6f6e120867656e6572617465120472656164120577726974651a160a076d657373616765120472656164120577726974651a170a086f6666636861696e120472656164120577726974651a160a076f6e636861696e120472656164120577726974651a140a057065657273120472656164120577726974651a180a067369676e6572120867656e657261746512047265616400000620141d7a86c330a4fca48e5c5c2e3c6912b28bf6337f1f4990714c905f15022613"
		exitUserLndRpcPort     = "10002"
		exitUserLndRpcHostPort = "localhost:" + exitUserLndRpcPort

		serverLndTLSCert     = "2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d494943506a43434165536741774942416749514342524736625430566463756167475054774a6b737a414b42676771686b6a4f50515144416a41784d5238770a485159445651514b45785a73626d5167595856306232646c626d56795958526c5a43426a5a584a304d51347744415944565151444577566a59584a76624441650a467730794e5441794d6a59784d4449344d544261467730794e6a41304d6a4d784d4449344d5442614d444578487a416442674e5642416f54466d78755a4342680a645852765a3256755a584a686447566b49474e6c636e5178446a414d42674e5642414d5442574e68636d39734d466b77457759484b6f5a497a6a3043415159490a4b6f5a497a6a3044415163445167414570582f67587a6b796c38323465754978496553495364616336746243623751413972784857494f34584a6c65417976610a327a39634e76486f6a464c7653434671594657567051524857747938484349454875616c63614f4233544342326a414f42674e56485138424166384542414d430a41715177457759445652306c42417777436759494b775942425155484177457744775944565230544151482f42415577417745422f7a416442674e56485134450a466751556a4471792b314a4a5778376f6545704e334e6b5357626e664d386b776759494741315564455152374d486d4342574e68636d397367676c7362324e680a624768766333534342574e68636d39736767397762327868636931754d544974593246796232794346476876633351755a47396a613256794c6d6c75644756790a626d467367675231626d6c3467677031626d6c346347466a613256306767646964575a6a623235756877522f41414142687841414141414141414141414141410a414141414141414268775373485141484d416f4743437147534d343942414d43413067414d455543495144495331426b376472382b34424939354175637a76440a4848327267415743455650364a324d345647415134674967584175764f30524c71635448334567387a437869612f556266744e514e63684e464b74764956756b0a512f493d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a"
		serverLndMacaroon    = "0201036c6e6402f801030a10c78c0e5719ee2c58b21b8c98c1e336b11201301a160a0761646472657373120472656164120577726974651a130a04696e666f120472656164120577726974651a170a08696e766f69636573120472656164120577726974651a210a086d616361726f6f6e120867656e6572617465120472656164120577726974651a160a076d657373616765120472656164120577726974651a170a086f6666636861696e120472656164120577726974651a160a076f6e636861696e120472656164120577726974651a140a057065657273120472656164120577726974651a180a067369676e6572120867656e657261746512047265616400000620c973ade113b69d3fe575940ce855e2ff9e39412ccc22471e95b0a94e0acc59d8"
		serverLndRpcPort     = "10003"
		serverLndRPCHostPort = "localhost:" + serverLndRpcPort
	)

	currentBlockHeight := 300
	lockBlockHeight := currentBlockHeight + 4320

	assetId, _ := hex.DecodeString("eac09b42101643e8143416032fcbd45d58786a4bc3dd6c5a2eb8529bf2e2b2dc")
	ammt := 10

	boardingUserLndClient := taponark.InitLndClient(boardingUserLndRpcHostPort, boardingUserLndRpcPort, boardingUserLndTLSCert, boardingUserLndMacaroon)
	boardingUserTapClient := taponark.InitTapClient(boardingUserRPCHostPort, boardingUserRPCPort, boardingUserTapTLSCert, boardingUserTapMacaroon, boardingUserLndClient)

	exitUserLndClient := taponark.InitLndClient(exitUserLndRpcHostPort, exitUserLndRpcPort, exitUserLndTLSCert, exitUserLndMacaroon)
	exitUserTapClient := taponark.InitTapClient(exitUserRPCHostPort, exitUserRPCPort, exitUserTapTLSCert, exitUserTapMacaroon, exitUserLndClient)

	serverLndClient := taponark.InitLndClient(serverLndRPCHostPort, serverLndRpcPort, serverLndTLSCert, serverLndMacaroon)
	serverTapClient := taponark.InitTapClient(serverRPCHostPort, serverRPCPort, serverTapTLSCert, serverTapMacaroon, serverLndClient)

	boardingTransferDetails := taponark.SpendToBoardingTransaction(assetId, uint64(ammt), uint32(lockBlockHeight), &boardingUserTapClient, &serverTapClient)

	proofList, proofFile, genesisPoint := taponark.CreateRoundTransfer(boardingTransferDetails, assetId, &exitUserTapClient, &serverTapClient, 2)
	taponark.PublishTransfersAndSubmitProofs(assetId, proofList, genesisPoint, proofFile, &exitUserTapClient)
	// wait for transfer to reach

}
